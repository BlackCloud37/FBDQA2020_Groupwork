# 策略

## 构建股票池

**聚焦于行业板块，在每个行业板块中通过因子指标的交集选取出6支股票，再平衡周期为10日。**

**行业板块：**保险、农业、半导体、生物科技、工程机械、银行

（依据：Wind数据提供的近三年涨幅排序靠前的行业）

**因子**：市净率+市值+动量

（依据：课程第二讲中A股表现较优的因子）

**具体指标：**

市净率（P/B）：

选取市净率为1-10的股票

市值：

剔除市值排序后10%的股票（去除小市值股票）

动量:

选出10日跌幅前10%的股票

**代码参考**：第四讲股票池代码



#### 实现描述

> 以10天为周期
>
> 分别在六个行业板块中
> 	选取 {市净率为1-10}∩{市值在前90%}∩{十日跌幅前10%} 的6只(or 所有)股票
> 	将上述股票加入股票池
>
>  
>
> 约定接口
>
> 调用一次返回一个股票池的list/dataframe/series
>
> 10天的周期不在本函数体现



##投资策略（资金分配）

###优先选择：投资学的方法

1）选取（已经被挑选出来的）投资标的的股票，计算其预期收益率（按照过往的平均收益率来预测）和预期波动率（过往数据）

2）计算二者间的任意二者之间的covariance，形成协方差矩阵

3）构成feasible frontier：对于某一波动率（风险）而言，这些股票所能构成的最小及最大的收益。（具体实现方法可参见稍后上传的投资学项目里我们做过的代码）

4）以10年期国债为无风险利率构成无风险利率为截距、和feasible frontier的切线构成资本市场线

5）构建utility function， 形成最终最优的风险组合。

#### 实现描述

> 对股票池中的所有n只股票
>
> ​	获取其平均收益率、波动率（标准差）
>
> 对这n只股票计算nxn的协方差矩阵
>
> 构建feasible frontier
>
> 构建资本市场线
>
> 构建utility function（在n项中选择，







> feasible frontier
>
> ![Image:kexingji.jpg](https://wiki.mbalib.com/w/images/3/31/Kexingji.jpg)
>
> 资本市场线
>
> ![img](https://bkimg.cdn.bcebos.com/pic/0df431adcbef7609fedc149729dda3cc7dd99ee7?x-bce-process=image/resize,m_lfit,w_268,limit_1/format,f_jpg)
>
> 

###备选建议

原因：投资学最后做出来的风险组合有非常大的可能性，使得头寸的权重过多地押注在了某一个或者某几个股票上，使得后续策略比较难以操作。因此同样有如下两条备案。

1、方法一：等量分配法

每个投资标的分配相同的资金数额

2、方法二：根据风险加权

根据历史数据，在等量分配法的基础上，对于风险更大的投资标的调低权重，对于风险相对较小的投资标的调高权重。





## 择时

### 逻辑

利用EXPMA均线来控制入场出场时机，

>EXPMA=（当日或当期收盘价－上一日或上期EXPMA）/N+上一日或上期EXPMA
>
>其中，首次上期EXPMA值为上一期收盘价，N为天数。

20分钟K线，配合3日（或5日）EXPMA和20日（或30日）EXPMA，可以分组测算效果



可参考：

https://www.joinquant.com/view/community/detail/bc77d33ac2da40cea5702f944e708ef2?type=1

https://www.joinquant.com/view/community/detail/f96dab853be1784069c3bd9e30c162e6?type=1

#### 实现描述















```
每日运行

开盘前：
	构建股票池（如果股票池更新，那么开盘时将之前的持仓空仓卖出）
	如果更新了股票池，则对该股票池计算资金分配比例
	
盘中：
	如果股票池有更新
		空仓卖出
	如果短线上穿长线
		利用所有剩下的资金按分配买入股票
	如果短线下穿长线
		空仓卖出
	否则不操作
	
	
构建股票池#
计算资金分配####（待修改）
计算买入/卖出信号(包含EMA)###
买入操作#
```



